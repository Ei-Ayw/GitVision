<h2 id="Gh6QE">一、文档基础信息</h2>
| 项目 | 内容 |
| :---: | :---: |
| **PRD版本** | V1.0 |
| **对应产品版本** | 产品V1.0（含认证、仓库管理、基础分析、报告生成核心功能） |
| **撰写人** | Ayw |
| **撰写日期** | 2025年9月15日 |
| **评审状态** | 待技术评审 |
| **适用角色** | 开发工程师、UI/UX设计师、测试工程师、产品运营 |
| **关联文档** | [GitVision - GitHub仓库智能分析报告生成器](https://www.yuque.com/u57301927/pybqge/zt9f2a87xmtvsn4s) |


<h2 id="uBQff">二、产品概述</h2>
<h3 id="sQRIZ">2.1 产品定位</h3>
面向软件开发团队、技术管理者、开源项目维护者、技术招聘人员，提供**GitHub仓库自动化分析、智能化报告生成、多维度项目洞察**的SaaS平台，打破技术与非技术人员的信息壁垒，帮助用户高效展示、管理、提升代码项目价值。

<h3 id="dobPk">2.2 核心目标</h3>
1. 为个人开发者提供“<font style="background-color:#FBDE28;">一键生成项目展示报告</font>”的能力，降低面试/客户沟通成本；
2. 为技术团队提供“多仓库统一监控+可视化汇报”工具，提升团队管理效率；
3. 为开源维护者提供“项目活跃度分析+贡献者吸引”方案，助力开源项目增长。

<h3 id="fIDe9">2.3 目标用户</h3>
| 用户类型 | 核心代表 | 核心诉求 | 使用频率 |
| :---: | :---: | :---: | :---: |
| 个人开发者（主要） | Alex（全栈） | 快速生成面试项目报告，跟踪多项目健康度 | 每月2-3次 |
| 技术团队负责人（主要） | Sarah（主管） | 监控团队项目状态，向管理层输出技术汇报 | 每周1-2次 |
| 开源项目维护者（次要） | Michael（维护者） | 展示项目活跃度，吸引贡献者 | 每月1次 |


<h2 id="Wx1iY">三、核心功能模块设计</h2>
<h3 id="T79Tl">3.1 模块一：认证与权限管理（V1.0必实现）</h3>
<h4 id="xAMin">3.1.1 功能1：GitHub OAuth集成</h4>
+ **需求描述**：支持用户通过GitHub账号授权登录，获取最小必要权限，实现token自动管理；
+ **前置条件**：用户未登录，或登录状态已过期；
+ **操作流程**：
    1. 用户点击页面右上角“GitHub登录”按钮；
    2. 跳转至GitHub官方授权页，展示平台需获取的权限（`repo:read`读取仓库信息、`user:email`获取用户邮箱）；
    3. 用户同意授权后，GitHub回调至平台，返回临时授权码；
    4. 平台通过授权码获取`access_token`和`refresh_token`，加密存储至数据库；
    5. 自动跳转至用户仪表盘，登录状态生效（默认7天免登）；
+ **异常处理**：
    - 若用户拒绝授权：跳转回登录页，提示“授权失败，请重新尝试或检查GitHub账号权限”；
    - 若token过期：自动调用`refresh_token`刷新，刷新失败则提示“登录已过期，请重新登录”；
+ **原型要点**：
    - 登录页仅保留“GitHub登录”按钮，按钮样式贴合GitHub设计（黑底白字，左侧带GitHub图标）；
    - 授权过程中显示“正在跳转至GitHub授权...”加载态，避免用户重复点击；

<h4 id="oYgI7">3.1.2 功能2：多账号管理与切换</h4>
+ **需求描述**：支持用户绑定多个GitHub账号，实现账号快速切换，查看不同账号下的仓库；
+ **操作流程**：
    1. 用户登录后，点击右上角头像，选择“账号管理”；
    2. 进入账号管理页，展示已绑定账号列表（含GitHub用户名、绑定时间、最近使用时间）；
    3. 点击“添加账号”，重复OAuth授权流程绑定新账号；
    4. 点击账号列表中的“切换”按钮，即时切换当前生效账号，仪表盘仓库列表同步更新；
+ **限制条件**：单个平台账号最多绑定5个GitHub账号；
+ **原型要点**：
    - 账号列表中，当前生效账号用“√”标识，hover时显示“当前使用”提示；
    - 每个账号右侧提供“切换”“解绑”按钮，解绑前需二次确认（“解绑后该账号下的仓库将无法访问，是否确认？”）；

<h4 id="i7BVa">3.1.3 功能3：仓库访问权限控制</h4>
+ **需求描述**：验证用户对GitHub仓库的访问权限，区分个人/组织仓库、公有/私有仓库，记录访问日志；
+ **核心逻辑**：
    1. 用户添加仓库时，平台调用GitHub API检查当前账号是否有该仓库的`repo:read`权限；
    - 若为**个人私有仓库**：需账号为仓库所有者或被授权协作者，否则提示“无访问权限，请检查账号权限或切换账号”；
    - 若为**组织仓库**：需账号在组织中拥有“读取”权限，否则提示“需组织管理员授予仓库读取权限”；
    - 若为**公有仓库**：默认允许访问，若仓库已删除则提示“仓库不存在或已被删除”；
    2. 记录访问日志：每次访问仓库详情/触发分析时，记录“操作人、操作时间、仓库地址、操作类型、IP地址”；
+ **数据保留**：访问日志保留时长按用户等级区分（免费用户7天，专业用户30天，团队用户90天）；



<h3 id="OD8aQ">3.2 模块二：仓库管理（V1.0必实现）</h3>
<h4 id="qXmpJ">3.2.1 功能1：仓库添加（单仓库+批量导入）</h4>
+ **需求描述**：支持用户通过URL单添加、CSV批量导入、账号自动发现三种方式添加仓库；
+ **子功能1：单仓库添加**：
    - 操作流程：
        1. 用户进入“仓库管理→添加仓库”页，选择“单仓库添加”；
        2. 输入GitHub仓库URL（支持`https://github.com/xxx/xxx`或`git@github.com:xxx/xxx`格式）；
        3. 点击“验证并添加”，平台自动校验URL格式与访问权限；
        4. 校验通过后，提示“仓库添加成功，正在触发首次分析”，跳转至仓库详情页；
    - 格式校验规则：若输入URL不匹配GitHub仓库格式，实时提示“请输入有效的GitHub仓库URL（如[https://github.com/xxx/xxx）”；](https://github.com/xxx/xxx）”；)
+ **子功能2：批量导入**：
    - 需求描述：支持用户上传CSV文件批量导入仓库，支持失败重试；
    - 操作流程：
        1. 用户选择“批量导入”，下载“CSV模板”（模板含“仓库URL”列，示例行：`https://github.com/xxx/xxx`）；
        2. 上传填写好的CSV文件（最大100行，超出提示“单次最多导入100个仓库，请分文件上传”）；
        3. 平台解析文件，展示“待导入列表”（含URL、格式校验结果）；
        4. 点击“开始导入”，批量校验权限并添加，导入完成后展示“成功X个，失败Y个”；
        5. 点击“失败详情”，可下载失败原因（如“无访问权限”“URL无效”），支持勾选失败项重新导入；
    - 原型要点：
        * 上传区域显示“拖拽文件至此处或点击上传”，支持CSV格式（最大5MB）；
        * 导入过程中显示进度条（“已导入30/100，剩余约20秒”）；

<h4 id="To8xA">3.2.2 功能2：仓库列表与分组</h4>
+ **需求描述**：按“账号→个人/组织”层级展示仓库，支持搜索、筛选、分组管理；
+ **核心逻辑**：
    1. 仓库列表默认按“最近添加时间”倒序排列，顶部显示当前生效GitHub账号；
    2. 左侧分组栏：按“个人仓库”“组织仓库”分组（组织仓库按组织名子分组）；
    3. 筛选功能：支持按“分析状态”（待分析/分析中/分析完成/分析失败）、“语言类型”（JavaScript/Java/Python等）筛选；
    4. 搜索功能：输入仓库名/URL关键词，实时匹配并高亮结果；
+ **原型要点**：
    - 仓库卡片包含：仓库名（带GitHub跳转链接）、星标数（★X）、fork数（⑂X）、最后更新时间、语言标签（如“JavaScript”）、分析状态标签（绿色“完成”/黄色“分析中”/红色“失败”）；
    - 卡片hover时显示“生成报告”“重新分析”“删除”三个操作按钮；

<h4 id="tfLp7">3.2.3 功能3：仓库详情页</h4>
+ **需求描述**：展示仓库基础信息与分析结果，支持触发重新分析；
+ **页面结构**：
    1. 顶部信息栏：仓库名、GitHub链接按钮、“重新分析”按钮（点击后提示“确定重新分析？将覆盖历史结果”）；
    2. 基础信息卡片：
        * 核心指标：星标数、fork数、贡献者数、文件总数、代码总行数；
        * 基础信息：仓库描述、许可证类型（如MIT）、创建时间、最后提交时间；
    3. 可视化图表区：
        * 语言分布饼图（hover显示“JavaScript：65%（1200行）”）；
        * 近期提交趋势图（近30天，X轴日期，Y轴提交次数，点击日期显示当日提交详情）；
    4. 分析结果区（V1.0基础分析）：
        * 文件结构树（支持展开/折叠，显示目录与文件，标注文件类型图标）；
        * README预览（提取README.md内容，支持Markdown格式渲染，过长时显示“查看全部”）；
+ **异常处理**：
    - 若分析失败：显示红色提示“分析失败，原因：GitHub API速率限制，请1小时后重试”，提供“重试”按钮；



<h3 id="NdmgW">3.3 模块三：智能分析引擎（V1.0基础分析）</h3>
<h4 id="mlmZQ">3.3.1 功能1：自动触发与手动触发分析</h4>
+ **需求描述**：仓库添加后自动触发首次分析，支持用户手动重新分析，展示分析进度；
+ **触发规则**：
    - 自动触发：仓库添加成功后，立即加入分析任务队列（优先级：个人仓库＞组织仓库，免费用户队列≤5个任务，专业用户无限制）；
    - 手动触发：用户在仓库列表/详情页点击“重新分析”，触发新分析（覆盖历史结果）；
+ **进度展示**：
    1. 分析中状态显示进度条（“30%，正在提取代码行数”）；
    2. 进度节点：①获取元数据→②提取代码统计→③分析语言分布→④生成文件结构→⑤完成；
+ **性能要求**：100MB以下仓库分析时间≤10秒，100MB-500MB仓库≤30秒，500MB以上≤60秒；

<h4 id="Dnyjo">3.3.2 功能2：V1.0基础分析能力</h4>
| 分析项 | 输入来源 | 输出结果 | 展示形式 |
| --- | --- | --- | --- |
| 仓库元数据提取 | GitHub API（仓库信息） | 描述、主题、许可证、创建/更新时间 | 基础信息卡片文本 |
| 基础统计分析 | 仓库文件扫描 | 文件总数、代码总行数（排除空行/注释）、贡献者数 | 核心指标数字+趋势对比（如“较上次分析+120行”） |
| 语言检测与分布 | 文件后缀+代码内容识别 | 各语言占比（如JavaScript 65%、CSS 20%） | 饼图+百分比列表 |
| 文件结构树生成 | 仓库目录扫描 | 层级目录结构（含文件夹、文件，标注大小） | 可折叠树状图，支持搜索文件 |
| README内容提取 | README.md文件 | Markdown格式内容（图片、链接正常渲染） | 预览区+“查看全部”弹窗 |


<h3 id="msaAw">3.4 模块四：报告生成系统（V1.0必实现）</h3>
<h4 id="r5uGP">3.4.1 功能1：报告模板选择</h4>
+ **需求描述**：提供5种场景化模板，支持用户选择模板生成报告；
+ **模板详情**：

| 模板名称 | 目标场景 | 包含模块 | 适用用户 |
| --- | --- | --- | --- |
| 技术面试模板 | 面试时展示项目能力 | 项目概述、核心功能、技术栈、代码统计、个人贡献 | 个人开发者 |
| 团队汇报模板 | 向非技术管理层汇报 | 项目进度、健康度评分、风险点、下一步计划 | 技术团队负责人 |
| 开源展示模板 | 吸引贡献者/宣传项目 | 项目介绍、活跃度趋势、贡献者列表、使用指南 | 开源维护者 |
| 代码审计模板 | 技术评审/代码检查 | 代码质量指标、文件结构、依赖列表、改进建议 | 技术管理者 |
| 极简摘要模板 | 快速分享项目核心信息 | 项目名、核心功能、关键指标、二维码链接 | 所有用户 |


+ **操作流程**：
    1. 用户在仓库详情页点击“生成报告”，或在“报告中心→新建报告”选择仓库；
    2. 进入模板选择页，每个模板展示“模板名称+场景描述+预览图”；
    3. 用户选择模板后，点击“下一步”进入配置页；

<h4 id="bgwg8">3.4.2 功能2：报告配置与预览</h4>
+ **需求描述**：支持用户配置报告模块（启用/禁用）、调整顺序，实时预览效果；
+ **操作流程**：
    1. 配置页左侧显示“可选模块”（基于所选模板，如面试模板含“个人贡献”模块）；
    2. 用户可勾选模块（默认全选），拖拽调整模块顺序；
    3. 右侧实时预览报告效果（按配置动态更新），支持切换“PC端预览”“移动端预览”；
    4. 点击“高级设置”，可配置：
        * 报告标题（默认“[仓库名]分析报告”）；
        * 显示水印（免费用户默认显示“XXX平台生成”，专业用户可关闭）；
        * 日期范围（如“近30天分析”“全周期分析”）；
    5. 配置完成后，点击“生成报告”，进入生成进度页；

<h4 id="JV8yc">3.4.3 功能3：报告输出与格式支持</h4>
+ **需求描述**：支持生成Markdown、PDF、HTML三种格式，提供下载/复制功能；
+ **输出逻辑**：
    1. 报告生成完成后，跳转至报告详情页，顶部显示“生成成功”提示；
    2. 格式切换：点击“Markdown/PDF/HTML”标签，即时切换显示格式；
        * Markdown：显示纯文本代码，支持“复制全部”“下载.md文件”；
        * PDF：渲染为PDF格式（A4纸，黑白/彩色可选，专业用户支持自定义页眉页脚），支持“下载PDF”；
        * HTML：渲染为交互式网页（图表支持hover查看详情），支持“下载HTML文件”“复制访问链接”（链接有效期：免费用户7天，专业用户30天）；
+ **原型要点**：
    - PDF下载时显示“正在生成PDF，请稍候...”，生成完成后自动触发下载；
    - HTML链接复制后提示“链接已复制，有效期至X年X月X日”；



<h3 id="LAnZm">3.5 模块五：报告管理与分享（V1.0必实现）</h3>
<h4 id="aAjUq">3.5.1 功能1：报告库管理</h4>
+ **需求描述**：存储用户生成的报告，支持搜索、筛选、收藏、删除；
+ **核心逻辑**：
    1. 报告库默认按“生成时间”倒序排列，展示“报告名称、对应仓库、模板类型、生成时间、有效期”；
    2. 筛选功能：按“模板类型”（面试/汇报/开源等）、“有效期状态”（有效/已过期）筛选；
    3. 搜索功能：输入报告名/仓库名关键词，实时匹配；
    4. 收藏功能：点击报告卡片的“★”按钮，收藏后在“我的收藏”分组中展示；
    5. 删除功能：点击“删除”，二次确认后删除（免费用户删除后不可恢复，专业用户支持“最近30天删除恢复”）；
+ **数据保留**：报告保留时长按用户等级区分（免费用户7天，专业用户90天，团队用户无限），过期前3天提示“您的报告[XXX]将于3天后过期，可升级套餐延长保留时间”；

<h4 id="soP3v">3.5.2 功能2：报告分享</h4>
+ **需求描述**：支持私密链接分享、公开发布、嵌入式代码分享；
+ **子功能1：私密链接分享**：
    - 操作流程：
        1. 用户在报告详情页点击“分享→私密链接”；
        2. 配置分享参数：设置密码（可选，默认无密码）、有效期（7天/30天，免费用户最多7天）；
        3. 生成链接后，支持“复制链接”“通过邮件发送”（输入收件人邮箱，发送含链接和提取码的邮件）；
        4. 分享后可在“分享管理”中查看“访问次数、最近访问时间”，支持“取消分享”；
    - 安全控制：私密链接仅支持通过链接+密码（若设置）访问，不支持搜索引擎收录；
+ **子功能2：嵌入式代码分享**：
    - 需求描述：生成HTML嵌入代码，支持用户嵌入GitHub README、个人博客等场景；
    - 操作流程：
        1. 用户点击“分享→嵌入代码”；
        2. 选择嵌入样式（卡片式/列表式）、尺寸（自适应/固定宽度）；
        3. 生成嵌入代码（如`<iframe src="xxx" width="100%" height="300"></iframe>`）；
        4. 点击“复制代码”，提供“预览”按钮查看嵌入效果；
    - 示例场景：开源维护者将嵌入代码添加到项目README.md，访客可直接查看报告预览；



<h2 id="Hj7Yr">四、非功能需求</h2>
<h3 id="NFM6Y">4.1 性能需求</h3>
| 指标 | 要求 | 测量标准 |
| --- | --- | --- |
| 页面加载速度 | 首屏加载≤2秒，完整加载≤3秒 | 基于Chrome浏览器，3G网络环境 |
| API响应时间 | 普通接口（如列表查询）P95≤500ms | 压力测试（并发1000用户） |
| 报告生成时间 | 基础报告（V1.0）平均≤30秒，P95≤60秒 | 基于100MB以下仓库，单节点处理能力 |
| 分析任务处理能力 | 单用户同时处理≤5个分析任务 | 任务队列无阻塞，优先级调度正常 |


<h3 id="QDcWU">4.2 安全性需求</h3>
1. **数据加密**：用户`access_token`/`refresh_token`采用AES-256加密存储，传输过程用HTTPS；
2. **权限控制**：严格校验用户对仓库的访问权限，禁止越权访问他人仓库；
3. **隐私合规**：
    - 明确告知用户数据用途（仅用于仓库分析和报告生成），提供“数据删除”功能（用户可删除所有仓库数据和报告）；
    - 符合GDPR、CCPA等法规，不收集无关用户信息；
4. **安全防护**：
    - 防止SQL注入、XSS攻击（输入过滤、输出编码）；
    - 接口添加防刷限制（单IP单日调用API不超过1000次）；

<h3 id="tn1Ic">4.3 兼容性需求</h3>
1. **浏览器兼容性**：支持Chrome（≥90版）、Firefox（≥88版）、Edge（≥90版）、Safari（≥14版），确保功能正常、UI无错乱；
2. **移动端兼容性**：支持iOS（≥14）、Android（≥10）系统的Chrome/Safari浏览器，核心功能（查看报告、生成报告）适配移动端屏幕；

<h3 id="IRJR3">4.4 数据埋点需求</h3>
| 埋点类型 | 核心埋点项 | 用途 |
| --- | --- | --- |
| 用户行为埋点 | 登录次数、添加仓库次数、生成报告次数、模板选择分布 | 分析用户核心行为，优化转化路径 |
| 功能使用埋点 | 批量导入使用率、分享功能使用率、重新分析次数 | 评估功能价值，决定迭代优先级 |
| 异常埋点 | 登录失败次数、分析失败次数、报告生成失败次数 | 定位问题，提升系统稳定性 |


<h2 id="Ph19B">五、上线标准</h2>
1. **功能完成度**：V1.0核心功能（认证、仓库管理、基础分析、报告生成、分享）100%实现，无阻断性bug；
2. **性能达标**：满足4.1节所有性能指标，报告生成时间、API响应时间通过压力测试；
3. **兼容性**：覆盖目标浏览器和移动端，UI适配无严重问题，功能正常使用；
4. **安全合规**：完成安全审计（防注入、防XSS），用户数据加密存储，隐私政策文档上线；
5. **文档完善**：
    - 面向用户：《用户使用手册》（含登录、添加仓库、生成报告等操作指南）；
    - 面向团队：《测试用例文档》《API接口文档》《部署文档》；



<h2 id="NAXbt">六、风险与应对措施</h2>
| 风险类型 | 具体风险 | 应对措施 |
| --- | --- | --- |
| 技术风险 | GitHub API速率限制，导致分析失败 | 1. 实现智能限流（根据GitHub API剩余配额动态调整分析任务；2. 增加缓存机制（重复分析同一仓库时，30分钟内复用缓存结果）；3. 提示用户“API配额不足，可1小时后重试或切换GitHub账号” |
| 技术风险 | 大仓库（＞500MB）分析时间过长，用户流失 | 1. 分阶段分析（先返回基础信息，再后台处理详细分析）；2. 显示预估时间（“仓库较大，预计分析时间5分钟，可先关闭页面，完成后邮件通知”）；3. 限制免费用户分析大仓库（仅专业用户支持＞500MB仓库） |
| 业务风险 | 用户对报告内容不信任，使用率低 | 1. 报告中添加“分析依据”（如代码行数统计来源、语言识别逻辑）；2. 提供“手动编辑报告”功能（允许用户修改分析结果）；3. 收集用户反馈，迭代优化分析算法 |
| 运营风险 | 用户获取成本高，免费用户转化低 | 1. 上线GitHub Marketplace，获取精准流量；2. 设计“免费用户体验高级功能”（如免费生成1次PDF报告）；3. 推出推荐计划（推荐1人付费，奖励1个月专业版） |


